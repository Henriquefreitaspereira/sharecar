<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>

	$(document).ready(function(){
		
		$("#b1").click(function(){
			$.ajax({
				url: "api/auth",
				type: "post",
				data: "{'username': 'guest', 'password': '123456'}",
				success: function(){
					alert("success");
				},
				statusCode: {
					401: function() {
						alert("falha de autenticação");
					}
				}
			});
		});
		
		$("#b2").click(function(){
			$.ajaxSetup({
				headers: {
					'Authorization': "Basic XXXXX"
				}
			});

			$.ajax({
				url: "api/route",
				type: "get",
				//username: "80342167553",
				//password: "123456",
				//data: null,
				assync: false,
				success: function(){
					alert("success");
				},
		        beforeSend : function(req) {
		            req.setRequestHeader('Authorization', 'Basic dXNlcm5hbWU6cGFzc3dvcmQ='); // <<<<----- USED HERE
		        },
				statusCode: {
					401: function() {
						alert("falha de autenticação");
					},
					403: function() {
						alert("não autorizado");
					}
				}
			});
		});
	});

      </script>
</head>
<body>
	<button id="b1">Autenticar</button>
	<button id="b2">Obter rotas</button>
</body>
</html>
